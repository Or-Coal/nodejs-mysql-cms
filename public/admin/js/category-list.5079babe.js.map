{"version":3,"sources":["webpack:///./src/views/Category/List.vue?ea5a","webpack:///./src/views/Category/List.vue?994b","webpack:///src/views/Category/List.vue","webpack:///./src/views/Category/List.vue?b7fb","webpack:///./src/views/Category/List.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","ref","loadNode","defaultProps","scopedSlots","_u","key","fn","node","data","_s","label","on","$event","stopPropagation","openEditModal","openInsertModal","openRemoveModal","insert_visible","insert_form","rules","model","value","callback","$$v","$set","expression","handleInsert","edit_visible","edit_form","handleEdit","staticRenderFns","name","parent_id","id","required","message","trigger","created","document","methods","resolve","Category","status","formName","valid","msg","type","then","catch","component"],"mappings":"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","file":"js/category-list.5079babe.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"分类列表\")])]),_c('el-tree',{ref:\"tree\",attrs:{\"node-key\":\"id\",\"load\":_vm.loadNode,\"default-expanded-keys\":[0],\"highlight-current\":\"\",\"lazy\":\"\",\"props\":_vm.defaultProps},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.openEditModal(node, data)}}},[_vm._v(\" 编辑 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.openInsertModal(node, data)}}},[_vm._v(\" 添加 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.openRemoveModal(node, data)}}},[_vm._v(\" 删除 \")])],1)])}}])})],1),_c('el-dialog',{attrs:{\"title\":\"添加分类\",\"visible\":_vm.insert_visible,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.insert_visible=$event}}},[_c('el-form',{ref:\"insertForm\",attrs:{\"model\":_vm.insert_form,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.insert_form.name),callback:function ($$v) {_vm.$set(_vm.insert_form, \"name\", $$v)},expression:\"insert_form.name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.insert_visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleInsert('insertForm')}}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑分类\",\"visible\":_vm.edit_visible,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.edit_visible=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.edit_form,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.edit_form.name),callback:function ($$v) {_vm.$set(_vm.edit_form, \"name\", $$v)},expression:\"edit_form.name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.edit_visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleEdit('editForm')}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\">\r\n        <span>分类列表</span>\r\n      </div>\r\n      <!-- 树形组件 -->\r\n      <el-tree ref=\"tree\" node-key=\"id\" :load=\"loadNode\" :default-expanded-keys=\"[0]\" highlight-current lazy :props=\"defaultProps\">\r\n\t\t\t\t<span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n\t\t\t\t\t<span>{{ node.label }}</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<el-button @click.stop=\"openEditModal(node, data)\" type=\"text\" icon=\"el-icon-edit\">\r\n\t\t\t\t\t\t\t编辑\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button @click.stop=\"openInsertModal(node, data)\" type=\"text\" icon=\"el-icon-circle-plus-outline\"\r\n            >\r\n\t\t\t\t\t\t\t添加\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button @click.stop=\"openRemoveModal(node, data)\" type=\"text\" icon=\"el-icon-delete\"\r\n            >\r\n\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n      </el-tree>\r\n    </el-card>\r\n    <!-- 添加模态框 -->\r\n    <el-dialog title=\"添加分类\" :visible.sync=\"insert_visible\" width=\"40%\">\r\n      <el-form :model=\"insert_form\" :rules=\"rules\" ref=\"insertForm\" label-width=\"80px\">\r\n        <el-form-item label=\"分类名称\" prop=\"name\">\r\n          <el-input v-model=\"insert_form.name\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"insert_visible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"handleInsert('insertForm')\">确 定</el-button>\r\n\t\t\t</span>\r\n    </el-dialog>\r\n    <!-- 编辑模态框 -->\r\n    <el-dialog title=\"编辑分类\" :visible.sync=\"edit_visible\" width=\"40%\">\r\n      <el-form :model=\"edit_form\" :rules=\"rules\" ref=\"editForm\" label-width=\"80px\">\r\n        <el-form-item label=\"分类名称\" prop=\"name\">\r\n          <el-input v-model=\"edit_form.name\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"edit_visible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"handleEdit('editForm')\">确 定</el-button>\r\n\t\t\t</span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Category } from \"@/api/\";\r\n\r\nexport default {\r\n  name: \"List\",\r\n  data() {\r\n    return {\r\n      defaultProps: { label: \"name\" },\r\n      insert_form: {\r\n        name: \"\",\r\n        parent_id: \"\",\r\n      },\r\n      edit_form: {\r\n        id: \"\",\r\n        name: \"\",\r\n        parent_id: \"\",\r\n      },\r\n      rules: {\r\n        name: [{ required: true, message: \"请输入分类名称\", trigger: \"blur\" }],\r\n      },\r\n      node: {}, //节点对象\r\n      insert_visible: false,\r\n      edit_visible: false,\r\n    };\r\n  },\r\n  created() {\r\n    document.title = \"分类列表\";\r\n  },\r\n  methods: {\r\n    async loadNode(node, resolve) {\r\n      // 根节点\r\n      if (node.level === 0) {\r\n        return resolve([{ name: \"全部分类\", id: 0 }]);\r\n      }\r\n      // 子节点\r\n      let { id } = node.data;\r\n      let { status, data } = await Category.subcate({ id });\r\n      if (status) {\r\n        resolve(data);\r\n      }\r\n    },\r\n    openEditModal(node, data) {\r\n      // 转存节点对象\r\n      this.node = node;\r\n      this.edit_form = { ...data };\r\n      this.edit_visible = true;\r\n    },\r\n    handleEdit(formName) {\r\n      this.$refs[formName].validate(async (valid) => {\r\n        if (valid) {\r\n          let { status, msg } = await Category.edit({ ...this.edit_form });\r\n          if (status) {\r\n            this.$message.success(msg);\r\n            this.edit_visible = false;\r\n            // 更新节点\r\n            this.node.data = this.edit_form;\r\n          } else {\r\n            this.$message.error(msg);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    openInsertModal(node, data) {\r\n      // 转存父级分类id\r\n      this.insert_form.parent_id = data.id;\r\n      // 转存父类节点parentNode\r\n      this.node = node;\r\n      this.insert_visible = true;\r\n    },\r\n    handleInsert(formName) {\r\n      this.$refs[formName].validate(async (valid) => {\r\n        if (valid) {\r\n          let { status, msg, data } = await Category.insert({ ...this.insert_form });\r\n          if (status) {\r\n            // 关闭弹窗\r\n            this.insert_visible = false;\r\n            // 添加节点\r\n            this.$refs.tree.append({ ...this.insert_form, ...data }, this.node);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    openRemoveModal(node, data) {\r\n      this.$confirm(\"确定要删除此分类吗？\", { type: \"warning\" })\r\n          .then(async () => {\r\n            let { status, msg } = await Category.remove({ id: data.id });\r\n            if (status) {\r\n              this.$refs.tree.remove(data);\r\n              this.$message.success(msg);\r\n            } else {\r\n              this.$message.error(msg);\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.$message.info(\"取消成功！\");\r\n          });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.custom-tree-node {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 13px;\r\n  padding-right: 8px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=61b08386&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}