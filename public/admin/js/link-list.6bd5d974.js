(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["link-list"],{"497b":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("友情链接")]),r("el-button",{attrs:{plain:"",size:"mini",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.insert_dialog_visible=!0}}},[e._v(" 添加链接 ")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"id",label:"#",width:"40"}}),r("el-table-column",{attrs:{prop:"title",label:"链接标题"}}),r("el-table-column",{attrs:{prop:"url",label:"网站地址",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{href:"#",target:"_blank"}},[e._v(e._s(t.row.url))])]}}])}),r("el-table-column",{attrs:{prop:"link_order",label:"排序数字"}}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.usable?"success":"info"}},[e._v(" "+e._s(1===t.row.usable?"启用":"禁用")+" ")])]}}])}),r("el-table-column",{attrs:{prop:"create_time",label:"添加日期"}}),r("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{icon:"el-icon-edit",type:"primary",plain:""},on:{click:function(r){return e.openEditDialog(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{icon:"el-icon-switch-button",type:1===t.row.usable?"info":"success",plain:""},on:{click:function(r){return e.handleSwitch(t.row)}}},[e._v(" "+e._s(1===t.row.usable?"禁用":"启用")+" ")]),r("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger",plain:""},on:{click:function(r){return e.handleRemove(t.row.id,t.$index)}}},[e._v("删除 ")])]}}])})],1),r("el-dialog",{attrs:{title:"添加友情链接",visible:e.insert_dialog_visible},on:{"update:visible":function(t){e.insert_dialog_visible=t},close:function(t){return e.handleDialogClose("insert_form")}}},[r("el-form",{ref:"insert_form",attrs:{model:e.insert_form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"链接标题",prop:"title"}},[r("el-input",{model:{value:e.insert_form.title,callback:function(t){e.$set(e.insert_form,"title",t)},expression:"insert_form.title"}})],1),r("el-form-item",{attrs:{label:"链接地址",prop:"url"}},[r("el-input",{model:{value:e.insert_form.url,callback:function(t){e.$set(e.insert_form,"url",t)},expression:"insert_form.url"}})],1),r("el-form-item",{attrs:{label:"显示顺序",prop:"link_order"}},[r("el-input",{model:{value:e.insert_form.link_order,callback:function(t){e.$set(e.insert_form,"link_order",t)},expression:"insert_form.link_order"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.insert_dialog_visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleInsert}},[e._v("添 加")])],1)],1),r("el-dialog",{attrs:{title:"编辑友情链接",visible:e.edit_dialog_visible},on:{"update:visible":function(t){e.edit_dialog_visible=t},close:function(t){return e.handleDialogClose("edit_form")}}},[r("el-form",{ref:"edit_form",attrs:{model:e.edit_form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"链接标题",prop:"title"}},[r("el-input",{model:{value:e.edit_form.title,callback:function(t){e.$set(e.edit_form,"title",t)},expression:"edit_form.title"}})],1),r("el-form-item",{attrs:{label:"链接地址",prop:"url"}},[r("el-input",{model:{value:e.edit_form.url,callback:function(t){e.$set(e.edit_form,"url",t)},expression:"edit_form.url"}})],1),r("el-form-item",{attrs:{label:"显示顺序",prop:"link_order"}},[r("el-input",{model:{value:e.edit_form.link_order,callback:function(t){e.$set(e.edit_form,"link_order",t)},expression:"edit_form.link_order"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.edit_dialog_visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("保 存")])],1)],1)],1)},n=[],l=r("5530"),a=r("1da1"),s=(r("4e82"),r("a434"),r("96cf"),r("365c")),o=(r("e186"),{name:"List",data:function(){return{tableData:[],insert_dialog_visible:!1,insert_form:{title:"",url:"http://",link_order:""},edit_dialog_visible:!1,current_link:"",edit_form:{id:"",title:"",url:"",link_order:""},rules:{title:[{required:!0,message:"请填写标题文字",trigger:"blur"}],url:[{type:"url",required:!0,message:"请填写完整的链接地址",trigger:"blur"}],link_order:[{required:!0,message:"请填写显示顺序！",trigger:"blur"},{pattern:/^\d+$/,message:"顺序必须是数字组成！",trigger:"blur"}]}}},created:function(){document.title="友情链接列表",this.loadList()},methods:{loadList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["f"].list();case 2:r=t.sent,i=r.status,r.msg,n=r.data,i&&(e.tableData=n);case 7:case"end":return t.stop()}}),t)})))()},handleInsert:function(){var e=this;this.$refs.insert_form.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var i,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,s["f"].insert(e.insert_form);case 3:i=t.sent,n=i.status,a=i.msg,o=i.data,n?(e.tableData.push(Object(l["a"])(Object(l["a"])({},e.insert_form),o)),e.tableData.sort((function(e,t){return e.link_order-t.link_order})),e.insert_dialog_visible=!1,e.$message.success(a)):e.$message.error(a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},openEditDialog:function(e){this.current_link=e,this.edit_form=Object(l["a"])({},e),this.edit_dialog_visible=!0},handleEdit:function(){var e=this;this.$refs.edit_form.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var i,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,s["f"].edit(e.edit_form.id,e.edit_form);case 3:i=t.sent,n=i.status,l=i.msg,i.data,n?(Object.assign(e.current_link,e.edit_form),e.edit_dialog_visible=!1,e.$message.success(l)):e.$message.error(l);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleRemove:function(e,t){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:r.$confirm("此操作将永久删除该友情链接, 是否继续?",{type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function i(){var n,l,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,s["f"].remove(e);case 2:n=i.sent,l=n.status,a=n.msg,l&&(r.tableData.splice(t,1),r.$message.success(a));case 6:case"end":return i.stop()}}),i)})))).catch((function(){r.$message.info("取消成功")}));case 1:case"end":return i.stop()}}),i)})))()},handleSwitch:function(e){var t=this,r=e.id,i=e.usable;this.$confirm("此操作将".concat(1===i?"禁用":"启用","该轮播图，是否继续？"),{type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function n(){var l,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s["f"].toggle({id:r,usable:-i});case 2:l=n.sent,a=l.status,o=l.msg,a&&(Object.assign(e,{usable:-i}),t.$message.success(o));case 6:case"end":return n.stop()}}),n)})))).catch((function(){t.$message.info("取消成功")}))},handleDialogClose:function(e){this.$refs[e].resetFields()}}}),u=o,c=(r("d51d"),r("2877")),d=Object(c["a"])(u,i,n,!1,null,"ba1e7f48",null);t["default"]=d.exports},d51d:function(e,t,r){"use strict";r("f438")},f438:function(e,t,r){}}]);
//# sourceMappingURL=link-list.6bd5d974.js.map