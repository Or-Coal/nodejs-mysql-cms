(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["auth-role"],{"7d70":function(e,t,r){"use strict";r("b038")},a434:function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),a=r("23cb"),s=r("5926"),o=r("07fa"),l=r("7b0b"),c=r("65f0"),u=r("8418"),d=r("1dde"),f=d("splice"),m=i.TypeError,p=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var r,n,i,d,f,_,g=l(this),w=o(g),k=a(e,w),x=arguments.length;if(0===x?r=n=0:1===x?(r=0,n=w-k):(r=x-2,n=h(p(s(t),0),w-k)),w+r-n>b)throw m(v);for(i=c(g,n),d=0;d<n;d++)f=k+d,f in g&&u(i,d,g[f]);if(i.length=n,r<n){for(d=k;d<w-n;d++)f=d+n,_=d+r,f in g?g[_]=g[f]:delete g[_];for(d=w;d>w-n+r;d--)delete g[d-1]}else if(r>n)for(d=w-n;d>k;d--)f=d+n-1,_=d+r-1,f in g?g[_]=g[f]:delete g[_];for(d=0;d<r;d++)g[d+k]=arguments[d+2];return g.length=w-n+r,i}})},b038:function(e,t,r){},d81d:function(e,t,r){"use strict";var n=r("23e7"),i=r("b727").map,a=r("1dde"),s=a("map");n({target:"Array",proto:!0,forced:!s},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},f5a0:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("管理员角色")]),r("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:function(t){e.insert_dialog_visible=!0}}},[e._v("添加角色 ")])],1),r("el-table",{attrs:{data:e.tableData}},[r("el-table-column",{attrs:{label:"#",prop:"id"}}),r("el-table-column",{attrs:{label:"分类",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",[e._v(e._s(t.row.name))])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:1===t.row.id,icon:"el-icon-edit",plain:"",type:"primary"},on:{click:function(r){return e.openEditDialog(t.row,t.$index)}}}),r("el-button",{attrs:{disabled:1===t.row.id,icon:"el-icon-delete",plain:"",type:"danger"},on:{click:function(r){return e.handleRemoveRole(t.row.id,t.$index)}}}),r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-setting"},on:{click:function(r){return e.openSettingDrawer(t.row.id)}}})]}}])})],1)],1)],1)],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.insert_dialog_visible},on:{"update:visible":function(t){e.insert_dialog_visible=t},close:function(t){return e.handleDialogClose("insertForm")}}},[r("el-form",{ref:"insertForm",attrs:{rules:e.rules,model:e.insert_form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{model:{value:e.insert_form.name,callback:function(t){e.$set(e.insert_form,"name",t)},expression:"insert_form.name"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.insert_dialog_visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleInsertRole}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑角色",visible:e.edit_dialog_visible},on:{"update:visible":function(t){e.edit_dialog_visible=t},close:function(t){return e.handleDialogClose("editForm")}}},[r("el-form",{ref:"editForm",attrs:{rules:e.rules,model:e.edit_form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{model:{value:e.edit_form.name,callback:function(t){e.$set(e.edit_form,"name",t)},expression:"edit_form.name"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.edit_dialog_visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleEditRole}},[e._v("保 存")])],1)],1),r("el-drawer",{attrs:{title:"设置角色菜单",visible:e.setting_visible,size:"25%",direction:"rtl"},on:{open:e.handleSetCheckedMenu,close:function(t){e.check_strictly=!0},"update:visible":function(t){e.setting_visible=t}}},[r("div",{staticClass:"am-padding-horizontal-xl setting-card"},[r("el-tree",{ref:"tree",attrs:{data:e.treeMenu,"check-strictly":e.check_strictly,"show-checkbox":"","highlight-current":"","default-expand-all":"","node-key":"id",props:e.defaultProps}}),r("div",{staticClass:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleSetRoleMenu}},[e._v("保存")]),r("el-button",{on:{click:function(t){e.setting_visible=!1}}},[e._v("取消")])],1)],1)])],1)},i=[],a=r("5530"),s=r("1da1"),o=(r("a434"),r("d81d"),r("96cf"),r("365c")),l={name:"Role",data:function(){return{tableData:[],insert_dialog_visible:!1,edit_dialog_visible:!1,setting_visible:!1,insert_form:{name:""},edit_form:{id:"",name:""},current_index:"",current_role_id:"",rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},treeMenu:[],check_strictly:!0,defaultProps:{label:"name"}}},created:function(){document.title="管理员角色",this.loadRoleList(),this.loadMenuList()},methods:{loadRoleList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["i"].list();case 2:r=t.sent,n=r.status,i=r.data,n&&(e.tableData=i);case 6:case"end":return t.stop()}}),t)})))()},openEditDialog:function(e,t){this.edit_form=Object(a["a"])({},e),this.edit_dialog_visible=!0,this.current_index=t},handleEditRole:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.next=3,o["i"].edit(e.edit_form.id,Object(a["a"])({},e.edit_form));case 3:n=t.sent,i=n.status,n.msg,i?(e.$set(e.tableData,e.current_index,Object(a["a"])({},e.edit_form)),e.$message.success("修改成功！"),e.edit_dialog_visible=!1):e.$message.error("修改失败！");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleRemoveRole:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r.$confirm("此操作将永久删除该角色, 是否继续?",{type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,o["i"].remove(e);case 2:i=n.sent,a=i.status,i.data,a&&(r.tableData.splice(t,1),r.$message.success("删除成功！"));case 6:case"end":return n.stop()}}),n)})))).catch((function(){r.$message.info("取消成功")}));case 1:case"end":return n.stop()}}),n)})))()},handleInsertRole:function(){var e=this;this.$refs.insert_form.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,o["i"].insert(Object(a["a"])({},e.insert_form));case 3:n=t.sent,i=n.status,n.msg,s=n.data,i&&(e.tableData.push(Object(a["a"])(Object(a["a"])({},s),e.insert_form)),e.insert_dialog_visible=!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleDialogClose:function(e){this.$refs[e].resetFields()},loadMenuList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["g"].loadAll({type:"tree"});case 2:r=t.sent,n=r.status,i=r.data,n&&(e.treeMenu=i);case 6:case"end":return t.stop()}}),t)})))()},openSettingDrawer:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.setting_visible=!0,t.current_role_id=e;case 2:case"end":return r.stop()}}),r)})))()},handleSetCheckedMenu:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["i"].menu({id:e.current_role_id,type:"flat"});case 2:r=t.sent,n=r.status,i=r.data,n&&(a=i.map((function(e){return e.id})),e.$refs.tree.setCheckedKeys(a),e.check_strictly=!1);case 6:case"end":return t.stop()}}),t)})))()},handleSetRoleMenu:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$refs.tree.getCheckedNodes(!1,!0),n=r.map((function(e){return e.id})),t.next=4,o["i"].setMenu({id:e.current_role_id,menus:n});case 4:i=t.sent,a=i.status,s=i.msg,a?(e.$message.success(s),e.setting_visible=!1):e.$message.error(s);case 8:case"end":return t.stop()}}),t)})))()}}},c=l,u=(r("7d70"),r("2877")),d=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=auth-role.55cdb1ab.js.map