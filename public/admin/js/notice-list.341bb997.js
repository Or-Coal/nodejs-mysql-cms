(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["notice-list"],{"15d1":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"box-card"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("公告列表")])]),n("el-table",{attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"id",label:"#",width:"40"}}),n("el-table-column",{attrs:{prop:"title",label:"标题",width:"250"}}),n("el-table-column",{attrs:{prop:"create_time",label:"发布日期"}}),n("el-table-column",{attrs:{prop:"update_time",label:"更新日期"}}),n("el-table-column",{attrs:{prop:"is_sticky",label:"是否置顶"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.is_sticky?"success":"info"}},[t._v(t._s(e.row.is_sticky?"置顶":"正常"))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-link",{staticClass:"am-margin-right-sm",attrs:{href:"#/notice/edit/"+e.row.id,type:"primary"}},[n("el-button",{attrs:{icon:"el-icon-edit",type:"primary",plain:""}},[t._v("编辑")])],1),n("el-button",{attrs:{type:e.row.is_sticky?"info":"success",icon:e.row.is_sticky?"el-icon-video-pause":"el-icon-upload2",plain:""},on:{click:function(n){return t.handleStick(e.row)}}},[t._v(" "+t._s(e.row.is_sticky?"取消":"置顶")+" ")]),n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",plain:""},on:{click:function(n){return t.handleRemove(e.row.id,e.$index)}}},[t._v(" 删除 ")])]}}])})],1)],1)},r=[],s=n("1da1"),i=(n("a434"),n("96cf"),n("365c")),c=(n("e186"),{name:"List",data:function(){return{tableData:[]}},created:function(){document.title="公告列表",this.loadList()},methods:{loadList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["h"].list();case 2:n=e.sent,a=n.status,r=n.data,a&&(t.tableData=r);case 6:case"end":return e.stop()}}),e)})))()},handleStick:function(t){var e=this,n=t.id,a=t.is_sticky;this.$confirm("此操作将".concat(1===a?"取消置顶":"置顶","该公告，是否继续？"),{type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function r(){var s,c,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=1===a?0:1,r.next=3,i["h"].stick({id:n,is_sticky:a});case 3:s=r.sent,c=s.status,o=s.msg,c&&(Object.assign(t,{is_sticky:a}),e.$message.success(o));case 7:case"end":return r.stop()}}),r)})))).catch((function(){e.$message.info("取消成功")}))},handleRemove:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n.$confirm("此操作将永久删除该公告, 是否继续?",{type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var r,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["h"].remove({id:t});case 2:r=a.sent,s=r.status,c=r.msg,s&&(n.tableData.splice(e,1),n.$message.success(c));case 6:case"end":return a.stop()}}),a)})))).catch((function(){n.$message.info("取消成功")}));case 1:case"end":return a.stop()}}),a)})))()}}}),o=c,l=n("2877"),u=Object(l["a"])(o,a,r,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=notice-list.341bb997.js.map